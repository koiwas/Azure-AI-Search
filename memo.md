# Azure-AI-Search

## ナレッジマイニング（情報検索）とは

データを取り込み検索する仕組み

### 情報検索

- テキスト解析：検索ワードからターム（単語）を抽出する
- インデックス：検索対象となるドキュメントのコレクション
- ランキング処理：検索結果を返却する際、何かしらの基準で並べ替える

### データ取り込み

- インデクサ：インデックス作成プロセスを担う（ETL）

## Azure AI Search とは

情報検索に必要な機能を提供するサービス

### 検索

- フルテキスト検索：指定した文字列を含むドキュメントを検索
- ベクトル検索：指定文字列のベクトル値が近いドキュメントを検索
- セマンティック検索：フルテキスト検索のランキングに対して LLM を使って意味的に近いものを昇格
- クエリ：保管されたドキュメントを検索

### 機能

- インデックス：検索対象のドキュメントを保管
- アナライザ：テキスト解析の仕組み
- インデクサ：データソースからインデックスを作成する仕組み
- エンリッチメント：OCR など

### セキュリティ（接続）

- API キー
- RBAC
- IP アドレス
- プライベートエンドポイント

### 可用性

- マルチリージョン/可用性ゾーン
- スケールアウト

### 回復性

- バックアップ
- ディザスタリカバリ

### SKU

- Free プランの場合、インデックスは 3 つまで登録可能

## 実装

### アーキテクチャ

- フロントエンド：App Service
- バックエンド：OpenAI Service(GPT モデル/Embedding モデル), AI Search, (MySQL), (Azure Functions)

### 環境構築

```
npm init
```

```
npm install pdfreader langchain dotenv uuid axios
```

- npm：Node.js のパッケージ管理ツール
- package.json：プロジェクト（フォルダ構成）設定ファイル
- index.js：エントリーポイント
- 実行とデバッグ：launch.json
- REST クライアント：REST API にリクエストを送るためのツールやライブラリ

### 実装

#### 非同期処理

処理を一度バックグラウンドに移す

- コールバック関数：非同期でも順番に処理したい `setTimeout(() => console.log(1), 1000)`
- Promise：約束のオブジェクト、resolve で次の処理を返す
- async：非同期宣言
- await：Promise の結果が返って来るまで待つ

#### Azure OpenAI

- chunking（チャンク化）：データを分割するプロセス
- embedding model（埋め込みモデル）：オブジェクトをベクトルに変換する
